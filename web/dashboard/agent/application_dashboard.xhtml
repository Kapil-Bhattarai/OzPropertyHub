<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:l="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">

    <ui:composition template="../../layout.xhtml">

        <ui:define name="title">Oz Property Hub</ui:define>

        <ui:define name="content">
            <div class="header-wrapper">
                <h4>User Dashboard</h4>
            </div>
            <h:form>
                <table id="tableContent">
                    <thead>
                        <tr>
                            <th>Property</th>
                            <th>Applied on</th>
                            <th>Bedroom</th>
                            <th>Parking</th>
                            <th>Bathroom</th>
                            <th>Applied Rent</th>
                            <th>Agent</th>
                            <th>Action</th>

                        </tr>
                    </thead>
                    <tbody>
                        <!--<h:outputText value="#{userBean.getPropertiesApplicationByAgent(userBean.getId())}"></h:outputText>-->
                        <f:forEach items="#{userBean.getPropertiesApplicationByAgent(userBean.getId())}" var="application">       
                            <tr>
                                <td>#{application.property.address.unit}, #{application.property.address.street_name}, #{application.property.address.suburb}, #{application.property.address.state}, #{application.property.address.postcode}</td>
                                <td>#{application.applicationDate} </td> 
                                <td>#{application.property.noOfBedroom} </td> 
                                <td>#{application.property.noOfParking} </td>
                                <td>#{application.property.noOfBathroom} </td> 
                                <td>#{application.property.rent} / week </td>
                                <td>Name: #{application.agent.firstName} <br/> Phone: #{application.agent.phone} <br/> Email: #{application.agent.email}</td>
                                <td>  
                                    <h:outputText value="#{application}"></h:outputText>
<!--                                    <h:selectOneMenu value="#{userBean.applicationStatus}" required="true" requiredMessage="Required!">
                                        <l:selectItems value="#{userBean.status}" />
                                    </h:selectOneMenu>-->
                                      <!--<h:commandButton value="View More" action="#{userBean.viewApplicationDetails(application)}" />-->
                                    <!--<a id="myLink" href="targetPage.xhtml?paramName=paramValue&anotherParam=#{managedBean.property}">Click Me</a>-->

                                    <h:outputLink styleClass="btn btn-success"  value="#{request.contextPath}/apply_property.faces?faces-redirect=true&amp;uid=#{application.user.getId()}&amp;pid=#{application.property.getPid()}&amp;aid=#{application.agent.getId()}&amp;reload=true">
                                        View Details
                                    </h:outputLink>
                                </td>
                            </tr>
                        </f:forEach>
                    </tbody>
                </table>
            </h:form>
        </ui:define>
    </ui:composition> 
</html>